{"version":3,"sources":["js/modal.js"],"names":["minBlur","maxBlur","isUpdatingBlur","updateBlurStopTimeout","multiplier","$","fn","toggleBlur","v","blurId","data","value","css","webkitFilter","filter","setBlur","blur","Math","round","firstElementChild","setAttribute","initBlur","_multiplier","defs","get","each","i","blurClone","cloneNode","appendChild","offset","updateBlur","pos","lastPos","abs","left","requestAnimationFrame","startUpdatingBlur","stopDelay","clearTimeout","setTimeout","stopUpdatingBlur","document","ready","$modal","$overlay","blocked","unblockTimeout","TweenMax","set","autoAlpha","isOpen","openModal","block","to","fromTo","x","window","width","scale","delay","rotationY","opacity","z","ease","Elastic","easeOut","easeParams","force3D","closeModal","Quad","easeInOut","onComplete","t","unblock","click"],"mappings":"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","file":"modal.4331011c.js","sourceRoot":"../src","sourcesContent":["(function(){\n    var minBlur=2,\n        maxBlur=200,\n        isUpdatingBlur=false,\n        updateBlurStopTimeout=null,\n        multiplier=0.25\n    ;\n        \n    $.fn.toggleBlur=function(v){\n        var blurId=$(this).data(\"blur-id\");\n        var value=v?\"url(#\"+blurId+\")\":\"none\";\n        $(this).css({\n            webkitFilter:value,\n            filter:value\n        });\n    }\n    $.fn.setBlur=function(v){\n        var blur=$(this).data(\"blur\");\n        v=Math.round(v);\n        if($(this).data(\"blur-value\")!=v){\n            if(v==0){\n                $(this).toggleBlur(false);\n            }else{\n                $(this).toggleBlur(true);\n\n                blur.firstElementChild.setAttribute(\"stdDeviation\",v+\",0\");\n                $(this).data(\"blur-value\",v);\n            }\n        }\n    }\n    $.fn.initBlur=function(_multiplier){\n        if(typeof _multiplier==\"undefined\") _multiplier=0.25;\n        multiplier=_multiplier;\n        var defs=$(\".filters defs\").get(0);\n        var blur=$(\"#blur\").get(0);\n        $(this).each(function(i){\n            var blurClone=blur.cloneNode(true);\n            var blurId=\"blur\"+i;\n            blurClone.setAttribute(\"id\",blurId);\n            defs.appendChild(blurClone);\n            $(this)\n                .data(\"blur\",blurClone)\n                .data(\"blur-id\",blurId)\n                .data(\"blur-value\",0)\n                .data(\"last-pos\",$(this).offset())\n            ;\n        });\n    }\n\n    $.updateBlur=function(){\n        $(\".js-blur\").each(function(){\n            var pos=$(this).offset();\n            var lastPos=$(this).data(\"last-pos\");\n            var v=Math.abs(pos.left-lastPos.left)*multiplier;\n            $(this).data(\"last-pos\",pos);\n            $(this).setBlur(v);\n        })\n        if(isUpdatingBlur){\n            requestAnimationFrame($.updateBlur);\n        }\n    }\n    $.startUpdatingBlur=function(stopDelay){\n        if(typeof stopDelay==\"undefined\"){\n            stopDelay=-1;\n        }\n        if(updateBlurStopTimeout!=null){\n            clearTimeout(updateBlurStopTimeout);\n            updateBlurStopTimeout=null;\n        }\n        if(!isUpdatingBlur){\n            isUpdatingBlur=true;\n            $.updateBlur();\n        }\n        if(stopDelay>-1){\n            updateBlurStopTimeout=setTimeout($.stopUpdatingBlur,stopDelay);\n        }\n    }\n    $.stopUpdatingBlur=function(){\n        isUpdatingBlur=false;\n    }\n})();\n\n// Modal Window\n$(document).ready(function() {\n    var $modal = $(\".modal\"),\n        $overlay = $(\".modal-overlay\"),\n        blocked = false,\n        unblockTimeout=null\n    ;\n\n    TweenMax.set($modal,{\n        autoAlpha:0\n    })\n\n    var isOpen = false;\n\n    function openModal() {\n        if (!blocked) {\n            block(400);\n\n            TweenMax.to($overlay, 0.3, {\n                autoAlpha: 1\n            });\n\n            TweenMax.fromTo($modal, 0.5, {\n                x: (-$(window).width() - $modal.width()) / 2 - 50,\n                scale:0.9,\n                autoAlpha:1\n            }, {\n                delay: 0.1,\n                rotationY:0,\n                scale:1,\n                opacity:1,\n                x: 0,\n                z:0,\n                ease: Elastic.easeOut,\n                easeParams: [0.4, 0.3],\n                force3D: false\n            });\n            $.startUpdatingBlur(800);\n        }\n    }\n\n    function closeModal() {\n        if(!blocked){\n            block(400);\n            TweenMax.to($overlay, 0.3, {\n                delay: 0.3,\n                autoAlpha: 0\n            });\n            TweenMax.to($modal, 0.3,{\n                x: ($(window).width() + $modal.width()) / 2 + 100,\n                scale:0.9,\n                ease: Quad.easeInOut,\n                force3D: false,\n                onComplete:function(){\n                    TweenMax.set($modal,{\n                        autoAlpha:0\n                    });\n                }\n            });\n            $.startUpdatingBlur(400);\n        }\n    }\n    function block(t){\n        blocked=true;\n        if(unblockTimeout!=null){\n            clearTimeout(unblockTimeout);\n            unblockTimeout=null;\n        }\n        unblockTimeout=setTimeout(unblock,t);\n    }\n    function unblock(){\n        blocked=false;\n    }\n    $(\".open-modal\").click(function() {\n        openModal();\n    })\n    $(\".close-modal,.modal-overlay,.input-submit\").click(function() {\n        closeModal();\n    })\n\n    $modal.initBlur(0.5);\n\n})"]}