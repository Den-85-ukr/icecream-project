{"version":3,"sources":["js/modal.js"],"names":["minBlur","isUpdatingBlur","updateBlurStopTimeout","multiplier","$","fn","toggleBlur","v","blurId","data","value","css","webkitFilter","filter","setBlur","blur","Math","round","firstElementChild","setAttribute","initBlur","_multiplier","defs","get","each","i","blurClone","cloneNode","appendChild","offset","updateBlur","pos","lastPos","abs","left","requestAnimationFrame","startUpdatingBlur","stopDelay","clearTimeout","setTimeout","stopUpdatingBlur","document","ready","$modal","$overlay","blocked","unblockTimeout","TweenMax","set","autoAlpha","block","t","unblock","click","to","fromTo","x","window","width","scale","delay","rotationY","opacity","z","ease","Elastic","easeOut","easeParams","force3D","Quad","easeInOut","onComplete"],"mappings":"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","file":"modal.85f45739.js","sourceRoot":"../src","sourcesContent":["(function(){\n    var minBlur=2,\n        maxBlur=200,\n        isUpdatingBlur=false,\n        updateBlurStopTimeout=null,\n        multiplier=0.25\n    ;\n        \n    $.fn.toggleBlur=function(v){\n        var blurId=$(this).data(\"blur-id\");\n        var value=v?\"url(#\"+blurId+\")\":\"none\";\n        $(this).css({\n            webkitFilter:value,\n            filter:value\n        });\n    }\n    $.fn.setBlur=function(v){\n        var blur=$(this).data(\"blur\");\n        v=Math.round(v);\n        if($(this).data(\"blur-value\")!=v){\n            if(v==0){\n                $(this).toggleBlur(false);\n            }else{\n                $(this).toggleBlur(true);\n\n                blur.firstElementChild.setAttribute(\"stdDeviation\",v+\",0\");\n                $(this).data(\"blur-value\",v);\n            }\n        }\n    }\n    $.fn.initBlur=function(_multiplier){\n        if(typeof _multiplier==\"undefined\") _multiplier=0.25;\n        multiplier=_multiplier;\n        var defs=$(\".filters defs\").get(0);\n        var blur=$(\"#blur\").get(0);\n        $(this).each(function(i){\n            var blurClone=blur.cloneNode(true);\n            var blurId=\"blur\"+i;\n            blurClone.setAttribute(\"id\",blurId);\n            defs.appendChild(blurClone);\n            $(this)\n                .data(\"blur\",blurClone)\n                .data(\"blur-id\",blurId)\n                .data(\"blur-value\",0)\n                .data(\"last-pos\",$(this).offset())\n            ;\n        });\n    }\n\n    $.updateBlur=function(){\n        $(\".js-blur\").each(function(){\n            var pos=$(this).offset();\n            var lastPos=$(this).data(\"last-pos\");\n            var v=Math.abs(pos.left-lastPos.left)*multiplier;\n            $(this).data(\"last-pos\",pos);\n            $(this).setBlur(v);\n        })\n        if(isUpdatingBlur){\n            requestAnimationFrame($.updateBlur);\n        }\n    }\n    $.startUpdatingBlur=function(stopDelay){\n        if(typeof stopDelay==\"undefined\"){\n            stopDelay=-1;\n        }\n        if(updateBlurStopTimeout!=null){\n            clearTimeout(updateBlurStopTimeout);\n            updateBlurStopTimeout=null;\n        }\n        if(!isUpdatingBlur){\n            isUpdatingBlur=true;\n            $.updateBlur();\n        }\n        if(stopDelay>-1){\n            updateBlurStopTimeout=setTimeout($.stopUpdatingBlur,stopDelay);\n        }\n    }\n    $.stopUpdatingBlur=function(){\n        isUpdatingBlur=false;\n    }\n})();\n\n// Modal Window\n$(document).ready(function() {\n    var $modal = $(\".modal\"),\n        $overlay = $(\".modal-overlay\"),\n        blocked = false,\n        unblockTimeout=null\n    ;\n\n    TweenMax.set($modal,{\n        autoAlpha:0\n    })\n\n    var isOpen = false;\n\n    function openModal() {\n        if (!blocked) {\n            block(400);\n\n            TweenMax.to($overlay, 0.3, {\n                autoAlpha: 1\n            });\n\n            TweenMax.fromTo($modal, 0.5, {\n                x: (-$(window).width() - $modal.width()) / 2 - 50,\n                scale:0.9,\n                autoAlpha:1\n            }, {\n                delay: 0.1,\n                rotationY:0,\n                scale:1,\n                opacity:1,\n                x: 0,\n                z:0,\n                ease: Elastic.easeOut,\n                easeParams: [0.4, 0.3],\n                force3D: false\n            });\n            $.startUpdatingBlur(800);\n        }\n    }\n\n    function closeModal() {\n        if(!blocked){\n            block(400);\n            TweenMax.to($overlay, 0.3, {\n                delay: 0.3,\n                autoAlpha: 0\n            });\n            TweenMax.to($modal, 0.3,{\n                x: ($(window).width() + $modal.width()) / 2 + 100,\n                scale:0.9,\n                ease: Quad.easeInOut,\n                force3D: false,\n                onComplete:function(){\n                    TweenMax.set($modal,{\n                        autoAlpha:0\n                    });\n                }\n            });\n            $.startUpdatingBlur(400);\n        }\n    }\n    function block(t){\n        blocked=true;\n        if(unblockTimeout!=null){\n            clearTimeout(unblockTimeout);\n            unblockTimeout=null;\n        }\n        unblockTimeout=setTimeout(unblock,t);\n    }\n    function unblock(){\n        blocked=false;\n    }\n    $(\".open-modal\").click(function() {\n        openModal();\n    })\n    $(\".close-modal,.modal-overlay,.input-submit\").click(function() {\n        closeModal();\n    })\n\n    $modal.initBlur(0.5);\n\n})"]}